# 导入导出功能使用指南

## 📤 导出功能

### 1. JSON格式导出
- **位置**：点击扩展右上角的📤按钮
- **功能**：导出所有账户数据为JSON文件
- **包含内容**：
  - 所有账户的密钥和名称
  - 账户的issuer信息
  - 使用统计（使用次数、最后使用时间）
  - 导出时间和版本信息
- **文件名**：`google-authenticator-backup-YYYY-MM-DD.json`

### 2. 二维码导出
- **位置**：在添加账户面板中点击"导出二维码"
- **功能**：生成包含所有账户的迁移二维码
- **用途**：可以用于其他设备或应用的账户迁移
- **显示**：弹窗显示二维码，包含账户数量信息

## 📥 导入功能

### 1. JSON格式导入
- **位置**：点击扩展右上角的📥按钮
- **功能**：导入之前导出的JSON备份文件
- **验证**：自动验证文件格式和数据完整性
- **冲突处理**：跳过已存在的账户，避免覆盖
- **反馈**：显示导入成功数量和跳过的账户数

### 2. 二维码导入（现有功能）
- **扫描页面二维码**：点击"扫描二维码"按钮
- **导入图片文件**：点击"导入图片"选择本地文件
- **支持格式**：
  - Google Authenticator迁移格式
  - 单个账户otpauth格式

## 🔧 数据管理

### 清空所有数据
- **位置**：在添加账户面板中点击"清空所有"
- **安全措施**：需要二次确认
- **影响**：删除所有账户、使用统计和设置
- **不可逆**：操作后无法恢复

## 📋 导出数据格式示例

```json
{
  "version": "1.0",
  "exportDate": "2024-01-15T10:30:00.000Z",
  "totalAccounts": 3,
  "accounts": {
    "Gmail": {
      "name": "Gmail",
      "secret": "JBSWY3DPEHPK3PXP",
      "issuer": "Google",
      "usageCount": 15,
      "lastUsed": 1705312200000
    },
    "GitHub": {
      "name": "GitHub",
      "secret": "KRSXG5CTMVRXEZLU",
      "issuer": "GitHub",
      "usageCount": 8,
      "lastUsed": 1705308000000
    }
  },
  "accountInfo": {
    "Gmail": {
      "issuer": "Google"
    },
    "GitHub": {
      "issuer": "GitHub"
    }
  },
  "usageStats": {
    "Gmail": {
      "count": 15,
      "lastUsed": 1705312200000
    },
    "GitHub": {
      "count": 8,
      "lastUsed": 1705308000000
    }
  }
}
```

## ⚠️ 安全注意事项

1. **敏感信息**：导出的JSON文件包含账户密钥，请妥善保管
2. **文件安全**：建议将备份文件存储在安全的位置
3. **定期备份**：建议定期导出数据作为备份
4. **设备迁移**：更换设备时可以使用导出功能迁移数据

## 🚀 使用场景

### 场景1：设备更换
1. 在旧设备上导出所有账户数据
2. 在新设备上安装扩展
3. 导入之前导出的备份文件

### 场景2：数据备份
1. 定期导出账户数据
2. 将备份文件存储在安全位置
3. 需要时恢复数据

### 场景3：账户迁移
1. 使用二维码导出功能
2. 在其他设备或应用上扫描二维码
3. 完成账户迁移

## 🔍 故障排除

### 导入失败
- 检查文件格式是否为有效的JSON
- 确认文件包含必要的账户数据结构
- 查看控制台错误信息

### 导出失败
- 确认有账户数据可以导出
- 检查浏览器下载权限
- 尝试刷新页面后重试

### 二维码生成失败
- 确认qrcode.js库已加载
- 检查是否有账户数据
- 尝试重新打开扩展
